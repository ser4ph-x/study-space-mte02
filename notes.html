<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Notes | Study Space</title>
  <link rel="stylesheet" href="style.css">
</head>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    // üî¥ SAME CONFIG
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "login.html";
    }
  });
</script>

<body>

<header>
  <h1>Study Space</h1>
  <p>A shared place for notes and collaboration</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="notes.html">Notes</a>
  <a href="chat.html">Chat</a>
  <button onclick="toggleDark()">üåô</button>
</nav>

<div class="container">
  <h2>Study Notes</h2>

  <!-- üîç SEARCH BAR (CENTERED & SMALL) -->
  <div style="display:flex; justify-content:center; gap:10px; margin:20px 0;">
    <input
      type="text"
      id="searchInput"
      placeholder="Search notes..."
      onkeyup="searchNotes()"
      style="width:280px; padding:8px;"
    >
    <button onclick="clearSearch()">‚ùå</button>
  </div>

  <p id="noResults" style="display:none; color:#ef4444; text-align:center;">
    No results found.
  </p>

  <!-- üìò SEMESTER 1 -->
  <h3>Semester 1</h3>
  <ul class="notes-list">
    <li><a href="notes/semester-1/math.pdf">Mathematics</a></li>
    <li><a href="notes/semester-1/physics.pdf">Physics</a></li>
    <li><a href="notes/semester-1/electrical.pdf">Basic Electrical</a></li>
  </ul>

  <!-- üìó SEMESTER 2 -->
  <h3>Semester 2</h3>
  <ul class="notes-list">
    <li><a href="notes/semester-2/programming.pdf">Programming</a></li>
    <li><a href="notes/semester-2/electronics.pdf">Electronics</a></li>
    <li><a href="notes/semester-2/mechanics.pdf">Mechanics</a></li>
  </ul>
</div>

<!-- =========================
     SCRIPTS
========================= -->

<script>
  // üåô Load saved theme
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark");
  }

  function toggleDark() {
    const isDark = document.body.classList.toggle("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  // üîç Search + highlight
  function searchNotes() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    const lists = document.querySelectorAll(".notes-list");
    const noResults = document.getElementById("noResults");
    let found = false;

    lists.forEach(list => {
      list.querySelectorAll("li").forEach(item => {
        const link = item.querySelector("a");
        const text = link.innerText;

        // reset highlight
        link.innerHTML = text;

        if (text.toLowerCase().includes(query) && query !== "") {
          const regex = new RegExp(`(${query})`, "gi");
          link.innerHTML = text.replace(regex, "<mark>$1</mark>");
          item.style.display = "";
          found = true;
        } else if (query === "") {
          item.style.display = "";
          found = true;
        } else {
          item.style.display = "none";
        }
      });
    });

    noResults.style.display = found ? "none" : "block";
  }

  // ‚ùå Clear search
  function clearSearch() {
    document.getElementById("searchInput").value = "";
    document.getElementById("noResults").style.display = "none";

    document.querySelectorAll(".notes-list li").forEach(item => {
      const link = item.querySelector("a");
      link.innerHTML = link.innerText;
      item.style.display = "";
    });
  }
</script>

</body>
</html>
