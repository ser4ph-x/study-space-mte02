<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chat | Study Space</title>
  <link rel="stylesheet" href="style.css">
</head>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    // ðŸ”´ SAME CONFIG
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "login.html";
    }
  });
</script>

<body>

<header>
  <h1>Study Space</h1>
  <p>A shared place for notes and collaboration</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="notes.html">Notes</a>
  <a href="chat.html">Chat</a>
  <button onclick="toggleDark()">ðŸŒ™</button>
  <button onclick="logout()">Logout</button>

<script>
  function logout() {
    firebase.auth().signOut().then(() => {
      window.location.href = "login.html";
    });
  }
</script>

</nav>

  <script>
  // Run as soon as page loads
  (function () {
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.body.classList.add("dark");
    }
  })();

  function toggleDark() {
    const body = document.body;
    const isDark = body.classList.toggle("dark");

    localStorage.setItem("theme", isDark ? "dark" : "light");

    const iframe = document.getElementById("discordWidget");
    if (iframe) {
      iframe.src =
        "https://discord.com/widget?id=1464988856628678746&theme=" +
        (isDark ? "dark" : "light");
    }
  }
</script>

<div class="container">
  <h2>Study Chat</h2>
  <p>Chat with your friends directly inside Study Space.</p>

  <iframe
    id="discordWidget"
    src="https://discord.com/widget?id=1464988856628678746&theme=light"
    width="100%"
    height="450"
    allowtransparency="true"
    frameborder="0">
  </iframe>
</div>

</body>
</html>
